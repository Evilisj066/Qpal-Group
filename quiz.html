<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Career Quiz - Qpal Group</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 0;
      margin: 0;
    }

    .quiz-header {
      background-color: #6e8efb;
      color: white;
      padding: 30px 20px;
      text-align: center;
      border-radius: 0 0 20px 20px;
    }

    .quiz-container {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      max-width: 600px;
      margin: 40px auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    label {
      display: block;
      margin: 10px 0;
    }

    #next-btn {
      display: block;
      margin: 30px auto 0;
      padding: 10px 20px;
      font-size: 1rem;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #next-btn:hover {
      background: #0056b3;
    }

    .result-section {
      max-width: 600px;
      margin: 40px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

  <div class="quiz-header">
    <h1>Career Compass Quiz</h1>
    <p>Answer the following questions to discover your ideal career path!</p>
  </div>

  <div id="result" class="result-section" style="display: none;">
  <h2>Your Suggested Career Track:</h2>
  <p id="track-result"></p>
  <div id="roadmap"></div>
</div>


  <div class="quiz-container">
    <div id="question-container"></div>
  </div>

  <!-- Results -->
  <div id="result" class="result-section" style="display: none;">
    <h2>Your Suggested Career Track:</h2>
    <p id="track-result"></p>
    <div id="roadmap"></div>
  </div>

  <script>
    let currentQuestion = 0;
    const scores = { tech: 0, health: 0, arts: 0, business: 0 };
    const userAnswers = [];

    const quizData = [/* insert your 25-question array here */];

    const questionContainer = document.getElementById("question-container");
    const nextBtn = document.getElementById("next-btn");
    const resultSection = document.getElementById("result");
    const trackResult = document.getElementById("track-result");

    const loader = document.createElement("div");
    loader.id = "loader";
    loader.style.display = "none";
    loader.innerHTML = `<p>Loading...</p>`;
    document.body.appendChild(loader);

    function showQuestion() {
      const current = quizData[currentQuestion];
      if (!current) return;

      questionContainer.innerHTML = `
        <h2>Question ${currentQuestion + 1} of ${quizData.length}</h2>
        <p>${current.question}</p>
        <form id="question-form">
          ${current.options
            .map(
              (opt) => `
            <label>
              <input type="radio" name="answer" value="${opt.career}" required />
              ${opt.text}
            </label>`
            )
            .join("")}
          <button type="submit">${currentQuestion === quizData.length - 1 ? "Finish" : "Next"}</button>
        </form>
      `;

      const form = document.getElementById("question-form");
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const selected = form.answer.value;
        if (selected) {
          scores[selected]++;
          userAnswers.push({
            question: quizData[currentQuestion].question,
            answer: form.querySelector("input:checked").nextSibling.textContent.trim(),
            career: selected
          });
          currentQuestion++;
          if (currentQuestion < quizData.length) {
            showQuestion();
          } else {
            showResult();
          }
        }
      });
    }

    function showResult() {
      questionContainer.style.display = "none";
      nextBtn.style.display = "none";

      let topCareer = Object.entries(scores).reduce(
        (max, entry) => (entry[1] > max[1] ? entry : max),
        ["", -1]
      )[0];

      const messages = {
        tech: "Technology - You could explore careers in programming, IT, or engineering.",
        health: "Health - Consider nursing, medicine, therapy, or public health.",
        arts: "Arts - Maybe pursue graphic design, music, writing, or performing arts.",
        business: "Business - You might shine in entrepreneurship, marketing, or finance."
      };

      trackResult.textContent = messages[topCareer];
      resultSection.style.display = "block";

      showCareerRoadmap(topCareer);
      showAnswerSummary();
      showRetakeButton();
    }

    async function showCareerRoadmap(careerKey) {
      loader.style.display = "block";
      try {
        const response = await fetch("career_roadmaps.json");
        const data = await response.json();
        const roadmap = data[careerKey];

        const container = document.getElementById("roadmap");
        if (!roadmap || !container) return;

        container.innerHTML = `
          <h3>üìç Career Roadmap: ${roadmap.title}</h3>
          <p><strong>SHS Track:</strong> ${roadmap.shs_track}</p>
          <p><strong>College Courses:</strong> ${roadmap.college_courses.join(", ")}</p>
          <p><strong>Skills & Certifications:</strong> ${roadmap.skills_certifications.join(", ")}</p>
          <p><strong>Entry-level Jobs:</strong> ${roadmap.entry_level_jobs.join(", ")}</p>
          <p><strong>Advanced Jobs:</strong> ${roadmap.advanced_jobs.join(", ")}</p>
        `;

        container.style.display = "block";
      } catch (err) {
        console.error("Failed to load career roadmap:", err);
        const container = document.getElementById("roadmap");
        if (container) {
          container.innerHTML = "<p>‚ö†Ô∏è Unable to load roadmap. Please try again later.</p>";
          container.style.display = "block";
        }
      } finally {
        loader.style.display = "none";
      }
    }

    function showAnswerSummary() {
      const summary = document.createElement("div");
      summary.classList.add("result-section");
      summary.innerHTML = `
        <h3>üìù Your Answers Summary:</h3>
        <ul>
          ${userAnswers
            .map((item, i) => `<li><strong>Q${i + 1}:</strong> ${item.answer} (${item.career})</li>`)
            .join("")}
        </ul>
      `;
      resultSection.appendChild(summary);
    }

    function showRetakeButton() {
      const btn = document.createElement("button");
      btn.textContent = "Retake Quiz";
      btn.style.marginTop = "20px";
      btn.onclick = () => location.reload();
      resultSection.appendChild(btn);
    }

    function setupDarkModeToggle() {
      const toggle = document.createElement("button");
      toggle.id = "dark-mode-toggle";
      toggle.textContent = "üåô Toggle Dark Mode";
      toggle.style.position = "fixed";
      toggle.style.top = "20px";
      toggle.style.right = "20px";
      toggle.style.padding = "10px";
      toggle.style.zIndex = "999";

      toggle.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
      });

      document.body.appendChild(toggle);

      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
      }
    }

    // Add dark mode styles
    const darkStyle = document.createElement("style");
    darkStyle.textContent = `
      body.dark-mode {
        background: #121212;
        color: #f1f1f1;
      }
      body.dark-mode .quiz-container, 
      body.dark-mode #result {
        background: #1e1e1e;
        color: #fff;
      }
      body.dark-mode input[type="radio"] + span {
        color: #fff;
      }
    `;
    document.head.appendChild(darkStyle);

    document.addEventListener("DOMContentLoaded", () => {
      showQuestion();
      setupDarkModeToggle();
    });
  </script>
</body>
</html>
